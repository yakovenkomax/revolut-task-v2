(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(51),o=n.n(c),u=n(1),l=n(2),i=n(4),s=n(3),m=n(5),d=n(16),p={USD:"$",GBP:"\xa3",EUR:"\u20ac"},h=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currency,n=e.value,r=e.precision,c=void 0===r?2:r;if(isNaN(n))return null;var o=p[t],u=n.toFixed(c);return a.a.createElement(a.a.Fragment,null,o,u)}}]),t}(a.a.PureComponent),y=n(20),v=n.n(y),f=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:v.a.root},r.createElement("div",{className:v.a.bounce1}),r.createElement("div",{className:v.a.bounce2}),r.createElement("div",{className:v.a.bounce3}))}}]),t}(r.PureComponent),b=n(26),E=n.n(b),_=E()({RATES_UPDATE_LOADER:null}),O="You have",g="Unavailable",j="Exchange",T=n(53),A=n.n(T),w=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderContent",value:function(){var e=this.props,t=e.currencyFrom,n=e.currencyTo,r=e.inProgress,c=e.rate;return r?a.a.createElement(f,null):c?a.a.createElement(a.a.Fragment,null,a.a.createElement(h,{currency:t,value:1,precision:0})," = ",a.a.createElement(h,{currency:n,value:c,precision:4})):g}},{key:"render",value:function(){return a.a.createElement("div",{className:A.a.root},this.renderContent())}}]),t}(a.a.PureComponent),C=Object(d.b)(function(e){var t=e.exchange,n=e.rates,r=e.loaders[_.RATES_UPDATE_LOADER],a=t.currencyFrom,c=t.currencyTo;return{currencyFrom:a,currencyTo:c,inProgress:r,rate:n[c]/n[a]}})(w),D=n(7),x=n(27),R=n.n(x),F=n(39),N=n.n(F),L=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.disabled,r=e.onClick,c=e.text,o=R()(N.a.root,Object(D.a)({},N.a.disabled,n));return a.a.createElement("button",{className:o,type:t,disabled:n,onClick:r},c)}}]),t}(a.a.PureComponent),P=n(54),k=n.n(P),S=(n(82),n(29)),U=n.n(S),I=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currency,n=e.value;return n?a.a.createElement("div",{className:U.a.root},a.a.createElement("div",{className:U.a.currency},t),a.a.createElement("div",{className:U.a.wallet},O," ",a.a.createElement(h,{currency:t,value:n}))):null}}]),t}(a.a.PureComponent),B=n(55),G=n.n(B),M=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).onChange=function(e){var t=e.item,r=n.props,a=r.onChange,c=r.currencyList;a&&a(c[t])},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currencyList,n=e.value,r=e.wallet,c=t.indexOf(n);return a.a.createElement("div",{className:G.a.root},a.a.createElement(k.a,{infinite:!0,buttonsDisabled:!0,mouseDragEnabled:!0,keysControlDisabled:!0,startIndex:c,responsive:{0:{items:1}},onSlideChanged:this.onChange},t.map(function(e){return a.a.createElement(I,{key:e,currency:e,value:r[e]})})))}}]),t}(a.a.PureComponent),X=n(56),H=n.n(X),J=n(40),K=n.n(J),V=6,W=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={amount:""},n.contentEditable=a.a.createRef(),n.onCurrencySelect=function(e){var t=n.props.onChange;n.focusInput(),t&&t(e)},n.handleKeyDown=function(){n.focusInput()},n.onAmountInput=function(e){var t=n.props.onInput,r=e.target.value,a=parseFloat(r);/^[0-9.\s]*$/.test(r)&&r.length<=V?(n.setState({amount:r}),a&&t&&t(a),""===r&&t&&t(0)):n.forceUpdate()},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.focusInput()}},{key:"focusInput",value:function(){var e=this.contentEditable.current;e!==document.activeElement&&this.moveCaretToEnd(e)}},{key:"moveCaretToEnd",value:function(e){if(e.focus(),"undefined"!==typeof window.getSelection&&"undefined"!==typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if("undefined"!==typeof document.body.createTextRange){var r=document.body.createTextRange();r.moveToElementText(e),r.collapse(!1),r.select()}}},{key:"render",value:function(){var e=this.state.amount,t=this.props,n=t.currencyFrom,r=t.wallet,c=Object.keys(r);return a.a.createElement("div",{className:K.a.root},a.a.createElement(M,{wallet:r,value:n,currencyList:c,onChange:this.onCurrencySelect}),a.a.createElement(H.a,{className:K.a.amountInput,html:e,innerRef:this.contentEditable,onChange:this.onAmountInput}))}}]),t}(a.a.PureComponent),Y=n(6),z=function(e){return e instanceof Y.Decimal&&e.gt(0)},Q=function(e){return e instanceof Y.Decimal&&e.gt(0)},Z=n(13),$=n.n(Z),q=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).onCurrencySelect=function(e){var t=n.props.onChange;t&&t(e)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderAmount",value:function(){var e=this.props,t=e.amount,n=e.rate;if(!z(n)||!Q(t))return a.a.createElement("div",{className:$.a.value});var r=t.mul(n).toFixed(2),c=R()($.a.value,Object(D.a)({},$.a.valueLong,r.length>7));return a.a.createElement("div",{className:c},r)}},{key:"renderRates",value:function(){var e=this.props,t=e.currencyFrom,n=e.currencyTo,r=e.inProgress,c=e.rate;return r||!c?null:a.a.createElement("div",{className:$.a.rate},a.a.createElement(h,{currency:n,value:1,precision:0})," = ",a.a.createElement(h,{currency:t,value:1/c,precision:2}))}},{key:"render",value:function(){var e=this.props,t=e.currencyTo,n=e.wallet,r=Object.keys(n);return a.a.createElement("div",{className:$.a.root},a.a.createElement(M,{wallet:n,value:t,currencyList:r,onChange:this.onCurrencySelect}),a.a.createElement("div",{className:$.a.amount},this.renderAmount(),this.renderRates()))}}]),t}(a.a.PureComponent),ee=n(17),te=n.n(ee),ne=n(28),re=E()({RATES_UPDATE:null,WALLET_EXCHANGE:null,FORM_UPDATE:null,LOADER_START:null,LOADER_END:null}),ae=n(57),ce=n.n(ae),oe=function(){var e=Object(ne.a)(te.a.mark(function e(){var t,n,r,a,c;return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml");case 3:return t=e.sent,e.next=6,t.text();case 6:return n=e.sent,r=ce.a.xml2js(n),a=r.elements[0].elements[2].elements[0].elements,c=a.reduce(function(e,t){var n=t.attributes.currency,r=t.attributes.rate;return e[n]=r,e},{}),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),ue=function(e){return{type:re.LOADER_END,payload:e}},le=function(){return function(){var e=Object(ne.a)(te.a.mark(function e(t){var n;return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t((r={loaderId:_.RATES_UPDATE_LOADER},{type:re.LOADER_START,payload:r})),e.next=3,oe();case 3:n=e.sent,t(ue({loaderId:_.RATES_UPDATE_LOADER})),t({type:re.RATES_UPDATE,payload:{rates:n}});case 6:case"end":return e.stop()}var r},e,this)}));return function(t){return e.apply(this,arguments)}}()},ie={exchange:function(){return function(e,t){var n=t(),r=n.exchange,a=n.rates,c=r.currencyFrom,o=r.currencyTo,u=r.amount,l=a[o]/a[c];e({type:re.WALLET_EXCHANGE,payload:{currencyFrom:c,currencyTo:o,amount:u,rate:l}})}}},se={updateForm:function(e){var t=e.currencyFrom,n=e.currencyTo,r=e.amount;return{type:re.FORM_UPDATE,payload:{currencyFrom:t,currencyTo:n,amount:r}}}},me=n(14),de=n.n(me),pe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleCurrencyFromChange=function(e){n.props.dispatch(se.updateForm({currencyFrom:e}))},n.handleCurrencyToChange=function(e){n.props.dispatch(se.updateForm({currencyTo:e}))},n.handleAmountChange=function(e){n.props.dispatch(se.updateForm({amount:e}))},n.handleSubmit=function(e){e.preventDefault(),n.props.dispatch(ie.exchange())},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(le())}},{key:"render",value:function(){var e=this.props,t=e.currencyFrom,n=e.currencyTo,r=e.inProgress,c=e.enabled,o=e.wallet,u=e.amount,l=e.rate;return a.a.createElement("form",{className:de.a.root,onSubmit:this.handleSubmit},a.a.createElement("header",{className:de.a.header},a.a.createElement("div",{className:de.a.headerLeft}),a.a.createElement("div",{className:de.a.headerCenter},a.a.createElement(C,null)),a.a.createElement("div",{className:de.a.headerRight},a.a.createElement(L,{type:"submit",text:j,disabled:!c}))),a.a.createElement("main",{className:de.a.main},a.a.createElement(W,{wallet:o,amount:u,currencyFrom:t,onChange:this.handleCurrencyFromChange,onInput:this.handleAmountChange}),a.a.createElement(q,{currencyFrom:t,currencyTo:n,inProgress:r,wallet:o,amount:u,rate:l,onChange:this.handleCurrencyToChange})))}}]),t}(a.a.PureComponent),he=Object(d.b)(function(e){var t=e.exchange,n=e.wallet,r=e.rates,a=e.loaders,c=t.currencyFrom,o=t.currencyTo,u=t.amount,l=a[_.RATES_UPDATE_LOADER],i=function(e,t,n){if(z(e[t])&&z(e[n]))return e[n].div(e[t])}(r,c,o);return{currencyFrom:c,currencyTo:o,inProgress:l,enabled:function(e,t,n,r,a){return!(!z(a[e])||!z(a[t]))&&e!==t&&!!Q(r)&&!n[e].lt(r)}(c,o,n,u,r),wallet:n,amount:u,rate:i}})(pe),ye=n(11),ve=n(58),fe=n(8),be={EUR:new Y.Decimal(567.89),GBP:new Y.Decimal(876.543),USD:new Y.Decimal(123.4)},Ee=Object(fe.a)({EUR:new Y.Decimal(0),GBP:new Y.Decimal(0),USD:new Y.Decimal(0)},be),_e={EUR:new Y.Decimal(1)},Oe={currencyFrom:"EUR",currencyTo:"GBP",amount:new Y.Decimal(0)},ge=Object.keys(_).reduce(function(e,t){return Object(fe.a)({},e,Object(D.a)({},t,!1))},{}),je=Object(ye.c)({wallet:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case re.WALLET_EXCHANGE:var r=n.payload,a=r.currencyFrom,c=r.currencyTo,o=r.amount,u=r.rate;return(e=Object(fe.a)({},t))[a]=e[a].minus(o),e[c]=e[c].plus(o.mul(u)),e;default:return t}},rates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re.RATES_UPDATE:var n=t.payload.rates,r=Object.keys(n).reduce(function(e,t){return Object(fe.a)({},e,Object(D.a)({},t,new Y.Decimal(n[t])))},{});return Object(fe.a)({},e,r);default:return e}},exchange:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case re.FORM_UPDATE:var r=n.payload,a=r.currencyFrom,c=r.currencyTo,o=r.amount;return e=Object(fe.a)({},t),a&&(e.currencyFrom=a),c&&(e.currencyTo=c),"undefined"!==typeof o&&(e.amount=new Y.Decimal(o)),e;default:return t}},loaders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re.LOADER_START:var n=t.payload.loaderId;return e[n]?e:Object(fe.a)({},e,Object(D.a)({},n,!0));case re.LOADER_END:var r=t.payload.loaderId;return e[r]?Object(fe.a)({},e,Object(D.a)({},r,!1)):e;default:return e}}}),Te={wallet:Ee,rates:_e,exchange:Oe,loaders:ge},Ae=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ye.d)(Object(ye.a)(ve.a)),we=(n(109),Object(ye.e)(je,Te,Ae));o.a.render(a.a.createElement(d.a,{store:we},a.a.createElement(he,null)),document.getElementById("root"))},13:function(e,t,n){e.exports={root:"ExchangeTo_root__qUaiz",amount:"ExchangeTo_amount__3Tu1g",value:"ExchangeTo_value__3SjI2",valueLong:"ExchangeTo_valueLong__1NPtn",rate:"ExchangeTo_rate__nIxe0"}},14:function(e,t,n){e.exports={root:"App_root__1nDjN",header:"App_header__3U-gB",headerLeft:"App_headerLeft__cFFdv",headerCenter:"App_headerCenter__3yw3r",headerRight:"App_headerRight__1dPFj",main:"App_main__1ZmMF"}},20:function(e,t,n){e.exports={root:"Loader_root__3ryVv",bounce1:"Loader_bounce1__sdI3_",bounce2:"Loader_bounce2__3vdAd",bounce3:"Loader_bounce3__GT_0_",bounce:"Loader_bounce__YmQtY"}},29:function(e,t,n){e.exports={root:"CurrencyDisplay_root__34vox",currency:"CurrencyDisplay_currency__1Z2vd",wallet:"CurrencyDisplay_wallet__25GJp"}},39:function(e,t,n){e.exports={root:"Button_root__26xsm",disabled:"Button_disabled__2i_Ff"}},40:function(e,t,n){e.exports={root:"ExchangeFrom_root__2zVQv",amountInput:"ExchangeFrom_amountInput__37RoF"}},53:function(e,t,n){e.exports={root:"ExchangeRate_root__NC2uk"}},55:function(e,t,n){e.exports={root:"CurrencySelector_root__KUtB6"}},59:function(e,t,n){e.exports=n(112)},95:function(e,t){},97:function(e,t){}},[[59,2,1]]]);
//# sourceMappingURL=main.14a34255.chunk.js.map